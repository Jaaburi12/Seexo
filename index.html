<!DOCTYPE html><html lang="so">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WeChat Lite – HTML/CSS/JS</title>
  <meta name="description" content="WeChat-like single page chat UI built with vanilla HTML, CSS and JS. No backend; uses localStorage." />
  <style>
    :root{
      --bg:#0b141a;            /* WhatsApp-ish dark */
      --panel:#111b21;
      --panel-2:#202c33;
      --text:#e9edef;
      --subtext:#8696a0;
      --accent:#00a884;
      --me:#005c4b;
      --them:#202c33;
      --danger:#ef4444;
      --border:#233138;
    }
    [data-theme="light"]{
      --bg:#f0f2f5;
      --panel:#ffffff;
      --panel-2:#f5f6f6;
      --text:#111b21;
      --subtext:#667781;
      --accent:#008069;
      --me:#d9fdd3;
      --them:#ffffff;
      --danger:#dc2626;
      --border:#dfe5e7;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans",Cantarell,"Helvetica Neue",Arial}
    .app{display:grid;grid-template-columns:360px 1fr; height:100vh;}
    @media (max-width: 900px){.app{grid-template-columns:1fr}.sidebar{display:none}.app.chat-open .sidebar{display:block;position:fixed;inset:0 40% 0 0;z-index:30;box-shadow:8px 0 24px rgba(0,0,0,.4)}.app.chat-open .main{filter:blur(2px)}}/* Sidebar */
.sidebar{border-right:1px solid var(--border); background:var(--panel)}
.side-header{display:flex;align-items:center;gap:8px;padding:12px;border-bottom:1px solid var(--border)}
.avatar{width:36px;height:36px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#4ade80);color:white;font-weight:700}
.me-name{font-weight:600}
.pill{margin-left:auto; display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:var(--panel-2);cursor:pointer}
.search{padding:8px 12px;border-bottom:1px solid var(--border)}
.search input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--panel-2);color:var(--text)}
.chats{overflow:auto;height:calc(100vh - 120px)}
.chat-item{display:grid;grid-template-columns:48px 1fr auto;gap:10px;padding:10px 12px;border-bottom:1px solid var(--border);cursor:pointer;background:transparent}
.chat-item:hover{background:rgba(255,255,255,.04)}
.chat-item .avatar{width:48px;height:48px}
.title{font-weight:600}
.last{color:var(--subtext);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.time{color:var(--subtext);font-size:12px}

/* Main */
.main{display:grid;grid-template-rows:auto 1fr auto;height:100vh;background:linear-gradient(180deg,rgba(11,20,26,.96),rgba(11,20,26,.96)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><defs><pattern id="p" width="40" height="40" patternUnits="userSpaceOnUse" patternTransform="scale(1)"><circle cx="2" cy="2" r="1" fill="%23ffffff22"/></pattern></defs><rect width="100%" height="100%" fill="%230b141a"/><rect width="100%" height="100%" fill="url(%23p)"/></svg>'); background-size:cover}
.main-header{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--border);background:var(--panel)}
.main-header .avatar{width:36px;height:36px}
.grow{flex:1}
.icon-btn{display:inline-grid;place-items:center;width:36px;height:36px;border-radius:10px;background:var(--panel-2);border:1px solid var(--border);cursor:pointer}

.messages{padding:18px;overflow:auto}
.msg{max-width:70%;margin:6px 0;padding:8px 10px;border-radius:12px;background:var(--them);position:relative;word-wrap:break-word}
.msg.me{margin-left:auto;background:var(--me)}
.meta{display:flex;gap:8px;color:var(--subtext);font-size:11px;margin-top:4px}
.msg img{max-width:220px;border-radius:10px;display:block}

.composer{display:flex;align-items:center;gap:8px;padding:10px;border-top:1px solid var(--border);background:var(--panel)}
.composer .input{flex:1; background:var(--panel-2);border:1px solid var(--border);border-radius:10px;padding:8px 10px;display:flex;align-items:center;gap:8px}
.composer textarea{flex:1;resize:none;max-height:120px;border:0;outline:0;background:transparent;color:var(--text)}
.hidden{display:none}

/* Dialog */
.dialog{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.5);z-index:40}
.dialog.open{display:grid}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;min-width:300px;max-width:92vw;padding:16px}
.row{display:flex;gap:10px;align-items:center;margin:8px 0}
.row input, .row select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--panel-2);color:var(--text)}
.actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
.btn{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--panel-2);color:var(--text);cursor:pointer}
.btn.primary{background:var(--accent);border-color:transparent;color:white}
.btn.danger{background:var(--danger);color:white;border-color:transparent}
.muted{color:var(--subtext)}
.tag{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:var(--panel-2);border:1px solid var(--border);font-size:12px}

/* Small helpers */
.ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
a{color:var(--accent)}

  </style>
</head>
<body>
  <div id="app" class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="side-header">
        <div class="avatar" id="meAvatar">LM</div>
        <div>
          <div class="me-name" id="meName">Laam User</div>
          <div class="muted" id="meStatus">Online</div>
        </div>
        <div class="pill" id="btnNewChat" title="Soo saar sheeko cusub">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
          New
        </div>
      </div>
      <div class="search">
        <input id="search" placeholder="Raadi magac/room…" />
      </div>
      <div id="chatList" class="chats"></div>
    </aside><!-- MAIN -->
<main class="main" id="main">
  <div class="main-header">
    <div class="avatar" id="roomAvatar">WC</div>
    <div class="grow">
      <div class="title ellipsis" id="roomTitle">Dooro sheeko</div>
      <div class="muted ellipsis" id="roomSub">Ma jiro chat la doortay</div>
    </div>
    <button class="icon-btn" id="btnTheme" title="Beddel iftiin/mugdi">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>
    <button class="icon-btn" id="btnSettings" title="Dejinta">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9 3.09V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0A1.65 1.65 0 0 0 20.91 11H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
    </button>
  </div>

  <div id="messages" class="messages"></div>

  <div class="composer">
    <button class="icon-btn" id="btnEmoji" title="Emoji">
      <span style="font-size:18px">😊</span>
    </button>
    <div class="input">
      <textarea id="input" rows="1" placeholder="Qor fariinta… (Shift+Enter = line break)"></textarea>
      <input type="file" id="file" accept="image/*" class="hidden" />
      <button class="tag" id="btnAttach" title="Ku dar sawir">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 1 1 5.66 5.66l-9.2 9.19a2 2 0 1 1-2.83-2.83l8.49-8.48"/></svg>
        Attach
      </button>
    </div>
    <button class="btn primary" id="btnSend">Dir</button>
  </div>
</main>

  </div>  <!-- DIALOGS -->  <div id="dlgNew" class="dialog" aria-hidden="true">
    <div class="card">
      <h3>Sheeko Cusub</h3>
      <div class="row">
        <input id="newName" placeholder="Magaca qof/room" />
      </div>
      <div class="row">
        <input id="newBio" placeholder="Sharax kooban (ikhtiyaari)" />
      </div>
      <div class="actions">
        <button class="btn" data-close="#dlgNew">Ka laabo</button>
        <button class="btn primary" id="createChat">Abuur</button>
      </div>
    </div>
  </div>  <div id="dlgSettings" class="dialog" aria-hidden="true">
    <div class="card">
      <h3>Dejinta App-ka</h3>
      <div class="row"><input id="meNameInput" placeholder="Magacaaga"/></div>
      <div class="row"><select id="themeSelect"><option value="dark">Mugdi</option><option value="light">Iftiin</option></select></div>
      <div class="row" style="justify-content:space-between">
        <button class="btn" id="btnExport">Export Backup</button>
        <label class="btn" for="importFile">Import Backup</label>
        <input id="importFile" type="file" accept="application/json" class="hidden" />
      </div>
      <div class="actions">
        <button class="btn danger" id="btnReset">Clear All</button>
        <button class="btn primary" data-close="#dlgSettings">OK</button>
      </div>
    </div>
  </div>  <div id="dlgEmoji" class="dialog" aria-hidden="true">
    <div class="card">
      <h3>Dooro Emoji</h3>
      <div id="emojiGrid" class="row" style="flex-wrap:wrap;gap:8px;max-width:420px"></div>
      <div class="actions">
        <button class="btn" data-close="#dlgEmoji">Xir</button>
      </div>
    </div>
  </div>  <script>
    // --- Minimalist WeChat-like chat, purely local (no backend) ---
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const storeKey = 'wechat_lite_v1';

    const sampleReplies = [
      'Waa hagaag! 👌', 'Mahadsanid!', 'Soo dir faahfaahin dheeraad ah.', 'Hadda waan eegayaa.', 'Insha Allaah.', 'Ok.', '👍', '😂', 'Waan ku soo laabanayaa.'
    ];

    const defaultData = () => ({
      me: { name: 'Laam User', theme: 'dark' },
      chats: [
        { id: crypto.randomUUID(), name:'Assistant', bio:'Tijaabo bot', avatar:'A', messages:[
          { id: crypto.randomUUID(), me:false, text:'Ku soo dhawoow WeChat Lite! Dukumiinti tani waa demo oo keydisa xogta gudaha browser-ka.', ts: Date.now()-1000*60*60 },
          { id: crypto.randomUUID(), me:true, text:'Mahadsanid! sideen u bilaabaa?', ts: Date.now()-1000*60*30 },
        ] }
      ],
      activeId: null
    });

    let state = load();
    if(!state.activeId && state.chats[0]) state.activeId = state.chats[0].id;
    applyTheme(state.me.theme);
    renderAll();

    // ---- Event wiring
    $('#btnNewChat').onclick = () => openDlg('#dlgNew');
    $('#createChat').onclick = createChat;
    $('#btnSettings').onclick = () => openDlg('#dlgSettings');
    $('#btnTheme').onclick = toggleTheme;
    $('#btnEmoji').onclick = () => openDlg('#dlgEmoji');
    $('#btnAttach').onclick = () => $('#file').click();
    $('#file').onchange = onAttach;
    $('#btnSend').onclick = sendMessage;
    $('#input').addEventListener('keydown', (e)=>{
      if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); sendMessage(); }
    });
    $('#search').addEventListener('input', renderChatList);

    $('[data-close="#dlgNew"]').onclick = ()=>closeDlg('#dlgNew');
    $('[data-close="#dlgSettings"]').onclick = ()=>closeDlg('#dlgSettings');
    $('[data-close="#dlgEmoji"]').onclick = ()=>closeDlg('#dlgEmoji');

    $('#meNameInput').value = state.me.name;
    $('#meNameInput').addEventListener('input', (e)=>{ state.me.name = e.target.value || 'Laam User'; save(); renderSidebarHeader(); });
    $('#themeSelect').value = state.me.theme;
    $('#themeSelect').onchange = (e)=>{ state.me.theme = e.target.value; applyTheme(state.me.theme); save(); };
    $('#btnExport').onclick = exportBackup;
    $('#importFile').onchange = importBackup;
    $('#btnReset').onclick = ()=>{ if(confirm('Dhammaan xogta waa la tirtirayaa?')){ localStorage.removeItem(storeKey); state = defaultData(); state.activeId = state.chats[0]?.id||null; applyTheme(state.me.theme); renderAll(); }};

    // Build emoji grid
    const emojis = '😀😁😂🤣😃😄😅😆😉😊🙂🙃😋😍😘😗😙😚😎🤩🤗🤔🤨😐😑😶🙄😏😣😥😮🤐😯😪😫🥱😴😌😛😝😜🤤😒😓😔😕🙁☹️😲😳🥵🥶🥴😵🤯🤕🤒🤧🥳🥰🤝🙏👍👎👏🙌💪🔥✨❤️💔💕💯✅⚠️'.split('');
    const egrid = $('#emojiGrid');
    emojis.forEach(e=>{
      const b = document.createElement('button');
      b.className='btn'; b.textContent=e; b.onclick=()=>{ insertAtCursor($('#input'), e); closeDlg('#dlgEmoji'); $('#input').focus();};
      egrid.appendChild(b);
    });

    // ---- Functions
    function load(){
      try{ return JSON.parse(localStorage.getItem(storeKey)) || defaultData(); }
      catch{ return defaultData(); }
    }
    function save(){ localStorage.setItem(storeKey, JSON.stringify(state)); }
    function applyTheme(t){ document.documentElement.setAttribute('data-theme', t==='light'?'light':'dark'); }

    function renderAll(){ renderSidebarHeader(); renderChatList(); renderRoom(); }

    function initials(name){ return (name||'W C').split(/\s+/).map(s=>s[0]).join('').slice(0,2).toUpperCase(); }

    function renderSidebarHeader(){
      $('#meName').textContent = state.me.name;
      $('#meAvatar').textContent = initials(state.me.name);
    }

    function renderChatList(){
      const list = $('#chatList');
      list.innerHTML = '';
      const q = ($('#search').value||'').toLowerCase();
      const chats = state.chats
        .map(c=>({
          ...c,
          last: c.messages[c.messages.length-1]
        }))
        .filter(c=> c.name.toLowerCase().includes(q) || (c.bio||'').toLowerCase().includes(q));

      chats.sort((a,b)=> (b.last?.ts||0) - (a.last?.ts||0));

      chats.forEach(c=>{
        const el = document.createElement('div');
        el.className='chat-item';
        el.onclick = ()=>{ state.activeId = c.id; save(); renderAll(); };
        el.innerHTML = `
          <div class="avatar">${initials(c.name)}</div>
          <div>
            <div class="title ellipsis">${escapeHtml(c.name)}</div>
            <div class="last">${escapeHtml(c.last?.text||c.bio||'No messages')}</div>
          </div>
          <div class="time">${c.last? timeAgo(c.last.ts):''}</div>
        `;
        if(c.id===state.activeId) el.style.background = 'rgba(255,255,255,.06)';
        list.appendChild(el);
      });
    }

    function renderRoom(){
      const room = state.chats.find(c=>c.id===state.activeId);
      const title = $('#roomTitle');
      const sub = $('#roomSub');
      const avatar = $('#roomAvatar');
      const box = $('#messages');
      box.innerHTML = '';
      if(!room){
        title.textContent = 'Dooro sheeko';
        sub.textContent = 'Ma jiro chat la doortay';
        avatar.textContent = 'WC';
        return;
      }
      title.textContent = room.name;
      sub.textContent = room.bio || '—';
      avatar.textContent = initials(room.name);

      room.messages.forEach(m=>{
        const el = document.createElement('div');
        el.className = 'msg'+(m.me?' me':'');
        el.innerHTML = `
          <div class="text">${formatMessage(m)}</div>
          <div class="meta"><span>${new Date(m.ts).toLocaleString()}</span></div>
        `;
        box.appendChild(el);
      });
      box.scrollTop = box.scrollHeight;
    }

    function formatMessage(m){
      if(m.image){ return `<img src="${m.image}" alt="image"/>` + (m.text? `<div>${linkify(escapeHtml(m.text))}</div>`:''); }
      return linkify(escapeHtml(m.text||''));
    }

    function createChat(){
      const name = ($('#newName').value||'').trim();
      if(!name){ alert('Magac geli'); return; }
      const bio = $('#newBio').value.trim();
      const chat = { id: crypto.randomUUID(), name, bio, avatar: initials(name), messages: [] };
      state.chats.unshift(chat);
      state.activeId = chat.id;
      save(); closeDlg('#dlgNew'); $('#newName').value=''; $('#newBio').value=''; renderAll();
    }

    function sendMessage(){
      const room = state.chats.find(c=>c.id===state.activeId);
      if(!room){ alert('Dooro chat marka hore'); return; }
      const input = $('#input');
      const text = input.value.trim();
      if(!text) return;
      room.messages.push({ id: crypto.randomUUID(), me:true, text, ts: Date.now() });
      input.value=''; save(); renderRoom();
      // Simulate a reply
      setTimeout(()=>{
        const reply = sampleReplies[Math.floor(Math.random()*sampleReplies.length)];
        room.messages.push({ id: crypto.randomUUID(), me:false, text: reply, ts: Date.now() });
        save(); renderRoom(); renderChatList();
      }, 500 + Math.random()*800);
      renderChatList();
    }

    function onAttach(e){
      const f = e.target.files?.[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        const room = state.chats.find(c=>c.id===state.activeId);
        if(!room){ alert('Dooro chat'); return; }
        room.messages.push({ id: crypto.randomUUID(), me:true, image: reader.result, ts: Date.now(), text: ''});
        save(); renderRoom(); renderChatList();
      };
      reader.readAsDataURL(f);
      e.target.value='';
    }

    function exportBackup(){
      const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href=url; a.download='wechat-lite-backup.json'; a.click();
      URL.revokeObjectURL(url);
    }

    function importBackup(e){
      const f = e.target.files?.[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        try{
          const data = JSON.parse(reader.result);
          if(!data || !data.chats) throw new Error('xog khaldan');
          state = data; if(!state.activeId && state.chats[0]) state.activeId = state.chats[0].id;
          applyTheme(state.me?.theme||'dark'); save(); renderAll();
        }catch(err){ alert('Import wuu fashilmay: '+err.message); }
      };
      reader.readAsText(f);
      e.target.value='';
    }

    function insertAtCursor(el, text){
      const [start, end] = [el.selectionStart, el.selectionEnd];
      el.value = el.value.slice(0,start) + text + el.value.slice(end);
      el.selectionStart = el.selectionEnd = start + text.length;
    }

    function toggleTheme(){
      state.me.theme = state.me.theme==='light'?'dark':'light';
      applyTheme(state.me.theme); save();
      $('#themeSelect').value = state.me.theme;
    }

    // Utilities
    function timeAgo(ts){
      const s = Math.floor((Date.now()-ts)/1000);
      if(s<60) return s+'s';
      const m=Math.floor(s/60); if(m<60) return m+'m';
      const h=Math.floor(m/60); if(h<24) return h+'h';
      const d=Math.floor(h/24); if(d<7) return d+'d';
      const w=Math.floor(d/7); if(w<4) return w+'w';
      return new Date(ts).toLocaleDateString();
    }
    function escapeHtml(str){
      return (str||'').replace(/[&<>"']/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[s]));
    }
    function linkify(text){
      const urlRe=/(https?:\/\/[^\s]+)/g; return text.replace(urlRe, '<a href="$1" target="_blank" rel="noopener">$1<\/a>');
    }

    function openDlg(sel){ $(sel).classList.add('open'); $(sel).setAttribute('aria-hidden','false'); }
    function closeDlg(sel){ $(sel).classList.remove('open'); $(sel).setAttribute('aria-hidden','true'); }
  </script>

  <!--
  NOTES (Somali):
  - App-kan waa frontend kaliya; si ay u noqoto real-time iyo multi-user waxaad ku dari kartaa backend (tusaale Node.js + Socket.IO, Firebase, ama Supabase Realtime).
  - Si aad GitHub Pages ugu daabacdo: Repo cusub > ku dheji faylkan sida index.html > Settings > Pages > deploy main branch.
  - PWA waa la dari karaa mustaqbalka (manifest + service worker). Hadda si fudud ayuu u shaqeeyaa.
  - Xogta waxaa lagu kaydiyaa localStorage ee browser-ka (hal qalab keliya). Isticmaal Export/Import si aad u wareejiso.
  -->
</body>
</html>
